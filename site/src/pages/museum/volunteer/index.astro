---
import Fixable from "@/components/Fixable.astro";
import FormLayout from "@/components/FormLayout.astro";
import Layout from "@/layouts/Layout.astro";
---

<Layout title="Volunteer">
  <FormLayout action="thank-you/">
    <label
      >First name
      <input name="firstname" />
    </label>
    <label
      >Middle name
      <input name="middlename" />
    </label>
    <label
      >Last name
      <input name="lastname" />
    </label>
    <label
      >Email address
      <Fixable as="input" fixed={{ type: "email" }} name="email" />
    </label>
    <label
      >Phone number
      <Fixable as="input" fixed={{ type: "tel" }} name="phone" />
    </label>
    <button type="submit">Submit</button>
  </FormLayout>
</Layout>

<script>
  import { disableInputs } from "@/lib/client/form";
  import { showToast } from "@/lib/client/toast";

  setTimeout(() => {
    showToast("The form has expired; please refresh the page to start over.", {
      duration: 3000,
      type: "error",
      withDismiss: false,
    });
    disableInputs(document.querySelector("main form") as HTMLFormElement);
  }, 60000);
</script>
